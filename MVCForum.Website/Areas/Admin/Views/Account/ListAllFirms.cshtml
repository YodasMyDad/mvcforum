@using MVCForum.Domain.Constants
@using MVCForum.Website.Application
@model MVCForum.Website.Areas.Admin.ViewModels.FirmListViewModel

@{
    ViewBag.Title = "All Firms";
}

<h2>
    <a href="@Url.Action("AddFirm")" class="btn-mvc">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
    </a>
    Firms
</h2>
<p>You must remove all users from a firm before you can delete it</p>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Edit</th>
            <th>Firm</th>
            <th>Users In Firm</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var firm in Model.MembershipFirms)
        {
            //var usersCount = firm.Users.Count;

                <tr>
                    <td>
                        <a href="@Url.Action("EditFirm", new { firm.Id })" class="btn-mvc">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                        </a>
                        <a href="@Url.Action("Manage")?search=@Url.Encode(firm.FirmName)" class="btn-mvc">
                            <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                        </a>
                    </td>
                    <td>@firm.FirmName</td>
                    <td>@firm.User.Count()</td>
                    <td>
                        <a href="@Url.Action("DeleteFirm", new { firm.Id })" class="btn-mvc">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                        </a>
                    </td>
                </tr>
        }
    </tbody>
</table>